<br />

<ng-container
  *ngIf="
    userSettings && barcodeList && barcodeList.length > 0;
    then barcodeSelection;
    else noBarcode
  "
></ng-container>

<ng-template #barcodeSelection>
  <h2 id="barcode-radio-group-label">Bitte w√§hlen Sie einen Barcode aus:</h2>

  <mat-radio-group
    aria-labelledby="barcode-radio-group-label"
    (change)="onSelectBarcode($event)"
  >
    <mat-card
      class="sternumlauf-barcode-item"
      *ngFor="let barcode of barcodeList"
    >
      <mat-card-header>
        <mat-card-title>
          <mat-radio-button [value]="barcode"
            >{{ barcode.barcode }}
          </mat-radio-button>
        </mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <p *ngIf="barcode.description">
          <strong>Beschreibung: </strong>{{ barcode.description }}
        </p>

        <p *ngIf="barcode.receive_date">
          <strong>Erhaltungsdatum: </strong
          >{{ barcode.receive_date | date : "mediumDate" }}
        </p>

        <p *ngIf="barcode.item_policy.desc">
          <strong>Richtlinie: </strong>{{ barcode.item_policy.desc }}
        </p>
      </mat-card-content>
    </mat-card>
  </mat-radio-group>

  <br />
  <mat-divider></mat-divider>
  <br />

  <div *ngIf="selectedBarcode">
    <div>
      <h4>
        Diese Werte stammen aus den Einstellungen. Wenn sie nicht korrekt sind,
        bitte die Einstellungen aufrufen und aktualisieren.
      </h4>

      <app-alert type="info">
        <div>
          <p>
            <strong>Location Type: </strong
            >{{ userSettings.sternumlauf.locationType }}
          </p>
          <p>
            <strong>Location Library: </strong
            >{{ userSettings.sternumlauf.locationLibrary }}
          </p>
          <p style="margin: 0">
            <strong>Location Circulation Desk: </strong
            >{{ userSettings.sternumlauf.locationCirculationDesk }}
          </p>
        </div>
      </app-alert>

      <button mat-button type="button" color="primary" routerLink="/settings">
        zu den Einstellungen
      </button>
    </div>

    <br />
    <br />

    <div>
      <button mat-flat-button color="primary" (click)="prepareSternumlauf()">
        sternumlauf vorbereiten
      </button>
    </div>

    <br />
  </div>
</ng-template>

<ng-template #noBarcode>
  <app-alert type="error">Kein Sternumlauf-Barcode gefunden</app-alert>
</ng-template>

<app-loading-spinner *ngIf="loading"></app-loading-spinner>
